DROP DATABASE IF EXISTS db_registro_clientes;
CREATE DATABASE db_registro_clientes;
USE db_registro_clientes;



/*------------CREAR TABLA CLIENTES 1 -----------*/

DROP TABLE IF EXISTS CLIENTES;

CREATE TABLE CLIENTES
(
    ID_CLIENTE INT(10) NOT NULL AUTO_INCREMENT,
    NOMBRE1 VARCHAR(30)  NOT NULL,
    NOMBRE2 VARCHAR(30)  NOT NULL,
    APELLIDO1 VARCHAR(30)  NOT NULL,
    APELLIDO2 VARCHAR(30)  NOT NULL,
    TELEFONO VARCHAR(12) NOT NULL,
    EMAIL VARCHAR(200) NOT NULL,
    ESTADO_CLIENTE VARCHAR(10) NOT NULL DEFAULT '1',

    PRIMARY KEY(ID_CLIENTE)
);


/*------------CREAR TABLA DOCUMENTOS 2 -----------*/

DROP TABLE IF EXISTS DOCUMENTOS;

CREATE TABLE DOCUMENTOS
(
    ID_DOCUMENTO INT(10) NOT NULL AUTO_INCREMENT,
    NOMBRE_DOCUMENTO VARCHAR(15) NOT NULL,
    NUMERO_DOCUMENTO VARCHAR(30) NOT NULL,
    ESTADO_DOCUMENTO VARCHAR(10) NOT NULL DEFAULT '1',

    ID_CLIENTE INT(10) NOT NULL,

    PRIMARY KEY(ID_DOCUMENTO),
    FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTES(ID_CLIENTE)
);


/*------------CREAR TABLA DEPARTAMENTOS 3 -----------*/

DROP TABLE IF EXISTS DEPARTAMENTOS;

CREATE TABLE DEPARTAMENTOS
(
    ID_DEPARTAMENTO INT(10) NOT NULL AUTO_INCREMENT,
    NOMBRE_DEPARTAMENTO VARCHAR(20) NOT NULL,

    PRIMARY KEY(ID_DEPARTAMENTO)
);


/*------------CREAR TABLA DIRECCIONES 4 -----------*/

DROP TABLE IF EXISTS DIRECCIONES;

CREATE TABLE DIRECCIONES
(
    ID_DIRECCION INT(10) NOT NULL AUTO_INCREMENT,
    DIRECCION VARCHAR(500) NOT NULL,
    MUNICIPIO VARCHAR(100)  NOT NULL,
    ESTADO_DIRECCION VARCHAR(10) NOT NULL DEFAULT '1',

    ID_DEPARTAMENTO INT(10) NOT NULL,
    ID_CLIENTE INT(10) NOT NULL,

    PRIMARY KEY(ID_DIRECCION),
    FOREIGN KEY(ID_DEPARTAMENTO) REFERENCES DEPARTAMENTOS(ID_DEPARTAMENTO),
    FOREIGN KEY(ID_CLIENTE) REFERENCES CLIENTES(ID_CLIENTE) 
);

/*--------------REAR TABLA ROLES 5-------------------------------*/
DROP TABLE IF EXISTS ROLES;

CREATE TABLE ROLES (
  ID_ROL INT(10) NOT NULL AUTO_INCREMENT,
  NOMBRE_ROL VARCHAR(30) NOT NULL,

  PRIMARY KEY (ID_ROL)
);

/*------------CREAR TABLA ADMINS 6 -----------*/

DROP TABLE IF EXISTS ADMINS;

CREATE TABLE ADMINS
(
    ID_ADMIN INT(10) NOT NULL AUTO_INCREMENT,
    NOMBRE_ADMIN VARCHAR(50) NOT NULL,
    PASSWORD_ADMIN VARCHAR(40) NOT NULL,
    ESTADO_ADMIN VARCHAR(10) NOT NULL DEFAULT '1',

    ID_ROL INT(10) NOT NULL,

    PRIMARY KEY(ID_ADMIN),
    FOREIGN KEY(ID_ROL) REFERENCES ROLES(ID_ROL) 
);

/*------------CREAR TABLA DB_BITACORA 7 -----------*/

DROP TABLE IF EXISTS DB_BITACORA;

CREATE TABLE DB_BITACORA
(
    ID_BITACORA INT(10) NOT NULL AUTO_INCREMENT,
    B_FECHA DATETIME,
    NOMBRE_ACCION VARCHAR(50) DEFAULT NULL,
    DATOS_ACCION VARCHAR(2000) DEFAULT NULL,
    VER_USUARIO VARCHAR(2000) DEFAULT NULL,
    EJECUTAR_CAMBIO VARCHAR(2000) DEFAULT NULL,
    REVERTIR_CAMBIO VARCHAR(2000) DEFAULT NULL,

    PRIMARY KEY(ID_BITACORA)
);